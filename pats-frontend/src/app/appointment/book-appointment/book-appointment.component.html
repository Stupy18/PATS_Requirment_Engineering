<div class="booking-container">
  <h2>Book an Appointment</h2>

  <!-- Success/Error Messages -->
  <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="alert alert-error">{{ errorMessage }}</div>

  <!-- Booking Form -->
  <form [formGroup]="bookingForm" class="booking-form">
    <div class="form-group">
      <label for="psychologistId">Select Psychologist *</label>
      <select id="psychologistId" formControlName="psychologistId" required>
        <option value="">Choose a psychologist</option>
        <option *ngFor="let psych of psychologists" [value]="psych.id">
          {{ psych.firstName }} {{ psych.lastName }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="appointmentDate">Appointment Date *</label>
      <input id="appointmentDate" type="date" formControlName="appointmentDate" required />
    </div>

    <div class="form-group">
      <label for="appointmentTime">Appointment Time *</label>
      <input id="appointmentTime" type="time" formControlName="appointmentTime" required />
    </div>

    <div class="form-group">
      <label for="type">Appointment Type *</label>
      <select id="type" formControlName="type" required>
        <option *ngFor="let type of appointmentTypes" [value]="type">{{ type }}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="durationMinutes">Duration (minutes) *</label>
      <select id="durationMinutes" formControlName="durationMinutes" required>
        <option *ngFor="let duration of durations" [value]="duration">{{ duration }}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="notes">Additional Notes</label>
      <textarea id="notes" formControlName="notes" rows="3"></textarea>
    </div>

    <div class="form-actions">
      <button type="button" (click)="searchAvailableSlots()" class="btn btn-secondary" [disabled]="loading">
        {{ loading ? 'Searching...' : 'Search Available Slots' }}
      </button>
      <button type="button" (click)="bookAppointment()" class="btn btn-primary" 
              [disabled]="bookingForm.invalid || loading">
        {{ loading ? 'Booking...' : 'Confirm Booking' }}
      </button>
    </div>
  </form>

  <!-- Available Slots -->
  <div *ngIf="availableSlots.length > 0" class="available-slots">
    <h3>Available Slots</h3>
    <div class="slots-grid">
      <div *ngFor="let slot of availableSlots" class="slot-card">
        <p><strong>Date:</strong> {{ slot.appointmentDateTime | date: 'MMM dd, yyyy' }}</p>
        <p><strong>Time:</strong> {{ slot.appointmentDateTime | date: 'HH:mm' }}</p>
        <p><strong>Duration:</strong> {{ slot.durationMinutes }} minutes</p>
      </div>
    </div>
  </div>
</div>
